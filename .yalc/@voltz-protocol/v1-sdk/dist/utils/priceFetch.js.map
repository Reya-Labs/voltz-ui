{"version":3,"file":"priceFetch.js","sourceRoot":"/","sources":["utils/priceFetch.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,gDAA0B;AAC1B,mCAAyC;AAElC,IAAM,aAAa,GAAG,UAAO,MAAc;;;;;gBAC1C,QAAQ,GAAG,CAAC,CAAC;gBAEV,OAAO,GAAG,CAAC;;;qBAAE,CAAA,OAAO,GAAG,QAAQ,CAAA;;;;gBAEvB,qBAAM,eAAK,CAAC,GAAG,CAC1B,6EAAsE,MAAM,oCAAiC,CAC9G,EAAA;;gBAFK,IAAI,GAAG,SAEZ;gBACD,sBAAO,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,EAAC;;;gBAE9B,IAAI,OAAO,GAAG,CAAC,KAAK,QAAQ,EAAE;oBAC5B,sBAAa,CAAC,gBAAgB,CAAC,OAAK,CAAC,CAAC;oBACtC,sBAAa,CAAC,cAAc,CAAC,4CAA4C,CAAC,CAAC;iBAC5E;;;gBAVqC,OAAO,IAAI,CAAC,CAAA;;oBAatD,sBAAO,CAAC,EAAC;;;KACV,CAAC;AAjBW,QAAA,aAAa,iBAiBxB","sourcesContent":["import axios from 'axios';\nimport { sentryTracker } from './sentry';\n\nexport const geckoEthToUsd = async (apiKey: string): Promise<number> => {\n  const attempts = 5;\n\n  for (let attempt = 0; attempt < attempts; attempt += 1) {\n    try {\n      const data = await axios.get(\n        `https://pro-api.coingecko.com/api/v3/simple/price?x_cg_pro_api_key=${apiKey}&ids=ethereum&vs_currencies=usd`,\n      );\n      return data.data.ethereum.usd;\n    } catch (error) {\n      if (attempt + 1 === attempts) {\n        sentryTracker.captureException(error);\n        sentryTracker.captureMessage('Unable to fetch ETH price after 5 attempts');\n      }\n    }\n  }\n  return 0;\n};\n"]}